# 重点
1. 原本的研究大多让智能体来规划单目标任务，在有限的工具里。
2. 人类有无限的时间和工具选择，可以完成
    > **那么智能体应该也可以**，只要给他们足够多的时间和正确的工具
3. 地点、住宿、交通、餐饮的相互决策；有客户的约束和尝试约束。
4. **GPT-4成功地为少数任务（0.6%）生成符合所有约束条件的计划，而其他所有LLM都未能完成任何任务。**
5. 现有的规划策略，如ReAct和Reflexion，在较简单的规划环境中可能有效，但对TravelPlanner中的多约束任务来说是不够的。**它们经常无法正确地将推理转化为正确的行动**，**并跟踪全局或多个约束**。语言代理需要更复杂的规划策略来实现接近人类水平的规划。
6. 分析揭示了现有语言代理的许多常见故障模式，例如在工具使用中出现参数错误、陷入死循环以及产生幻觉
7. 人类需要12分钟标注一个计划，生成一个要一两分钟，**我们可以用剩下的时间来不断检验和推导重试**
8. 所有测试都在0-shot样本下进行
    > 也许我们可以用shot，效果更好

## 3.1 Overview
1. TravelPlanner总共包含1,225个查询。TravelPlanner中的查询分为九组。这种分类基于两个标准：旅行持续时间和硬约束的数量。数据集分为训练、验证和测试集。训练集包括每组5个带有人工注释计划的查询（总共45对），验证集包括每组20个查询（总共180个），测试集包括1,000个查询。详细分布如表A.1所示。
2. 约束分类：
    1. 环境约束：现实世界是动态的，需要代理具有适应性。例如，到特定目的地的航班可能在某些时间不可用（例如，图1中没有从西雅图到旧金山的航班），可能是因为机票卖完了。在这种情况下，代理必须动态地寻求替代方案，例如更改航班的目的地或运输方式。为了模拟这一点，我们在TravelPlanner中引入了环境约束，以测试代理在规划中的适应性。
    2. 常识约束：在现实世界中工作并为人类服务的代理在设计计划时应该考虑常识。例如，重复访问相同的景点并不典型。为了评估代理在计划过程中对常识的理解和利用，我们在TravelPlanner中包含了常识约束
    3. 硬约束：代理的一项关键能力是有效地满足个性化用户需求。为了评估这一点，Trav-elPlanner整合了各种用户需求，例如预算约束。这些用户需求被称为硬约束。硬约束衡量代理对不同用户需求的泛化能力。

    <img src="md_image/Table1.png" alt="描述文字" width="300" height="200">

## 3.3 基准构建流程
1. 代理还被指示使用“NotebookWrite”工具来记录规划所需的信息。该工具集成用于评估智能体的工作记忆管理，并防止上下文积累造成的最大令牌限制。
2. **Question**:为了为 TravelPlanner 创建多样化的查询，我们从几个基本元素开始，包括出发城市、目的地和特定日期范围，随机选择这些元素来形成每个查询的骨架。随后，我们调整旅行的持续时间和硬约束的数量以创建不同级别的复杂性。
    >创建多样化查询的目的是什么
3. 旅行的持续时间（3 天、5 天或 7 天）决定了计划中包含的城市数量。
    1. 3天计划集中在1个城市
    2. 而5天和7天则涉及随机选择一个州的访问
    3. 5天计划分别前往2个城市
    4. 7天计划分别前往3个城市。
    - 天数越多，语言代理就需要更频繁地使用工具，从而增加了管理长期规划的难度。不确定的目的地要求代理人在多个城市做出决定，他们必须考虑城际连通性等因素。
4. travelplanner给出了难度级别分类，容易，中间，难

5. 每个查询至少有一个可行计划

6. 工作故意减少了对应一个查询的可行计划的数量（人工降低，而不是用启发式搜索）

### 评估方法
7. agents输出的是自然语言，工作把他转换成了json等

8. 评估的维度
    1. 交付率：要求**30步以内解决？？！**
    2. 尝试限制通过率
    3. 硬性限制通过率
    4. 最终通过率，宏观，微观

9. 两种模式
    1. two-stage:
    2. sole-planning: 不用调用工具