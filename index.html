<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>test</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/default.min.css">

</head>
<body>
    <div class="wrap-container"> <!-- flex容器 row-->
        <div class="sidebar-container">
            <div class="sidebar">
                <h2>FileBrowser</h2>
                <p></p>
            </div>
        <button class="collapse-button" onclick="collapseSidebar()">📑</button>
        </div>
        
        <div class="main-container">
            <div class="wrap-area">
                <div class="edit-area">
                    <h2>Edit Area</h2>
                    <div class="wrap-button">
                        <button class="save-button my-button">save</button>
                        <button class="discard-button my-button">discard</button>
                    </div>
                    <textarea name="" class="text-area" id="markdown-input"></textarea>
                </div>
            </div>
            <div class="wrap-area">
                <div class="preview-area">
                    <h2>Preview Area</h2>
                    <div class="wrap-button">
                        <button class="save-button my-button">empty</button>
                        <button class="discard-button my-button">empty</button>
                    </div>
                    <div id="markdown-content"></div>

                    
                </div>
            </div>
        </div>
    </div>
    <script>
        function collapseSidebar() {
            document.querySelector('.sidebar').classList.toggle('collapsed');
            document.querySelector('.sidebar-container').classList.toggle('collapsed');
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/marked@3.0.7/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const textarea = document.getElementById('markdown-input');
            const previewArea = document.getElementById('markdown-content');
    
            // 设置 marked 选项
            if (typeof marked !== 'undefined') {
                marked.setOptions({
                    highlight: function(code, lang) {
                        const validLanguage = hljs.getLanguage(lang) ? lang : 'plaintext';
                        return hljs.highlight(code, { language: validLanguage }).value;
                    }
                });
    
                // 监听 textarea 输入事件
                textarea.addEventListener('input', function() {
                    const markdownString = textarea.value;
                    const htmlContent = marked(markdownString);
                    previewArea.innerHTML = htmlContent;
                });
            } else {
                console.error("marked.js library is not loaded correctly.");
            }
             // 初始化代码高亮
             
        });
    </script>
    
</body>

</html>
